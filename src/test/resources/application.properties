# ============================================
# CONFIGURACIÃ“N PARA TESTS - TODO MOCKEADO
# ============================================
# No se conecta a ninguna base de datos real
# No se conecta a servicios externos (Artemis, Elasticsearch, FTP, etc.)
# ============================================

# Variables de entorno requeridas (valores mock)
LOG_LEVEL=INFO
JSON_LOGGING_ENABLED=false
SERVICE_NAME_BASE=/chatPort
SWAGGER_ENABLE=true
OPENAPI_ENABLED=true
SWAGGER_SERVERS_AT=http://localhost:8181

# Base de datos H2 en memoria (NO Oracle)
DB_USERNAME=sa
DB_PASSWORD=
DB_HOST=mem
DB_PORT=0
DB_SERVICE=testdb

# Artemis mock (deshabilitado)
AMQ_ARTEMIS_URL=tcp://localhost:61616
AMQ_ARTEMIS_USERNAME=artemis
AMQ_ARTEMIS_PASSWORD=artemis
AMQ_ARTEMIS_ENABLED=false

# BUK API mock
BUK_API_KEY=test-api-key
BUK_API_URL=http://localhost:8080/api/test

# Elasticsearch mock
ELASTICSEARCH_HOST=localhost:9200
ELASTICSEARCH_USERNAME=elastic
ELASTICSEARCH_PASSWORD=elastic
ELASTICSEARCH_INDEX=test-index

# FTP/SFTP mock
FTP_HOST=localhost
FTP_PORT=22
FTP_USERNAME=testuser
FTP_PASSWORD=testpass
FTP_WORKING_DIR=/test

# ============================================
# QUARKUS TEST CONFIGURATION
# ============================================

# HTTP - Puerto diferente para tests para evitar conflictos
quarkus.http.port=0
quarkus.http.test-port=0

# Base de datos H2 en memoria (reemplaza Oracle)
# INIT=CREATE SCHEMA IF NOT EXISTS SGD crea el esquema SGD que necesita AreaUsuario
quarkus.datasource.db-kind=h2
quarkus.datasource.jdbc.url=jdbc:h2:mem:testdb;DB_CLOSE_DELAY=-1;DB_CLOSE_ON_EXIT=FALSE;MODE=Oracle;INIT=CREATE SCHEMA IF NOT EXISTS SGD
quarkus.datasource.jdbc.driver=org.h2.Driver
quarkus.datasource.username=sa
quarkus.datasource.password=
quarkus.datasource.jdbc.min-size=1
quarkus.datasource.jdbc.max-size=5

# Hibernate ORM - recrea esquema en cada test
quarkus.hibernate-orm.database.generation=drop-and-create
quarkus.hibernate-orm.log.sql=false
quarkus.hibernate-orm.sql-load-script=no-file
quarkus.hibernate-orm.database.default-schema=PUBLIC

# Logging
quarkus.log.level=INFO
quarkus.log.console.json=false
quarkus.log.category."org.hibernate".level=WARN
quarkus.log.category."org.apache.camel".level=INFO
quarkus.log.category."io.quarkus".level=INFO

# DESHABILITAR Artemis completamente en tests
quarkus.artemis.enabled=false
quarkus.qpid-jms.url=

# DESHABILITAR Elasticsearch en tests
quarkus.elasticsearch.devservices.enabled=false

# OpenAPI/Swagger
quarkus.smallrye-openapi.path=/openapi
quarkus.swagger-ui.always-include=true
quarkus.swagger-ui.path=/swagger-ui

# DESHABILITAR rutas Camel que requieren servicios externos en tests
%test.quarkus.camel.routes-discovery.enabled=false
quarkus.camel.main.auto-startup=false
